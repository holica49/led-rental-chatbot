# Notion 데이터베이스 스키마 상세 문서

## 개요
이 문서는 LED 렌탈 MCP 프로젝트에서 사용하는 Notion 데이터베이스의 전체 스키마를 설명합니다.

## 필드별 상세 설명

### 1. 기본 정보 필드

#### 행사명 (title)
- **설명**: 프로젝트 또는 행사의 이름
- **예시값**: "삼성전자 신제품 발표회", "강남구청 LED 설치"
- **자동화**: 설치 서비스의 경우 "{지역} 프로젝트"로 자동 생성

#### 고객사 (select)
- **설명**: 고객 회사명
- **예시값**: "삼성전자", "LG전자", "메쎄이상"
- **옵션**: Notion에서 관리되는 선택 목록

#### 고객명 (rich_text)
- **설명**: 고객 담당자의 이름과 직급
- **형식**: "{이름} {직급}"
- **예시값**: "김철수 팀장", "이영희 매니저"

#### 고객 연락처 (phone_number)
- **설명**: 고객 담당자 전화번호
- **형식**: "010-0000-0000"
- **검증**: 한국 전화번호 형식

#### 행사장 (rich_text)
- **설명**: 행사 또는 설치 장소
- **예시값**: "코엑스 A홀", "강남구 테헤란로 123"

#### 담당자 (people)
- **설명**: 내부 담당 직원
- **자동 할당**: 
  - 설치: 유준수 구축팀장
  - 렌탈/멤버쉽: 최수삼 렌탈팀장

### 2. 서비스 관련 필드

#### 서비스 유형 (select)
- **옵션**: 설치, 렌탈, 멤버쉽
- **설명**: 제공하는 서비스 종류
- **자동화 트리거**: 서비스별 다른 프로세스 실행

#### 행사 상태 (status)
- **상태 목록**:
  - 견적 요청: 초기 상태
  - 견적 검토: 견적 계산 완료
  - 견적 승인: 고객 승인 완료
  - 배차 완료: 차량 배정 완료 (렌탈/멤버쉽)
  - 구인 완료: 인력 배정 완료 (렌탈/멤버쉽)
  - 설치 중: 설치 진행 중
  - 운영 중: 행사 진행 중 (렌탈/멤버쉽)
  - 철거 중: 철거 진행 중
  - 완료: 모든 프로세스 완료

#### 멤버 코드 (rich_text)
- **설명**: 멤버쉽 회원 인증 코드
- **현재 유효 코드**: "001" (메쎄이상)
- **용도**: VIP 가격 적용

### 3. 환경/상세 정보 필드

#### 설치 환경 (select)
- **옵션**: 실내, 실외
- **영향**: 
  - 실외 선택 시 추가 정보 수집
  - 견적 계산 방식 차이

#### 설치 공간 (select)
- **옵션**: 기업, 상가, 병원, 공공, 숙박, 전시홀, 기타
- **사용**: 설치 서비스에서만 사용

#### 설치 예산 (select)
- **옵션**: 
  - 1000만원 이하
  - 1000~3000만원
  - 3000~5000만원
  - 5000만원~1억
  - 1억 이상
  - 미정
- **사용**: 설치 서비스, 렌탈(실외)

#### 문의 목적 (select)
- **옵션**: 정보 조사, 아이디어 기획, 견적, 구매, 기타
- **사용**: 설치 서비스, 렌탈(실외)

#### 지지구조물 방식 (select)
- **옵션**: 목공 설치, 단독 설치
- **설명**: LED 설치 시 구조물 종류
- **사용**: 렌탈 서비스

### 4. 일정 필드

#### 행사 일정 (rich_text) ⚠️
- **형식**: "YYYY-MM-DD ~ YYYY-MM-DD"
- **예시**: "2025-07-26 ~ 2025-07-28"
- **주의**: 텍스트 타입 (date 타입 아님)
- **파싱**: 자동화에서 날짜 추출하여 사용

#### 설치 일정 (date)
- **설명**: LED 설치 예정일
- **자동 계산**: 보통 행사 시작 1-2일 전

#### 리허설 일정 (date)
- **설명**: 리허설 진행일
- **선택사항**: 필요시만 입력

#### 철거 일정 (date)
- **설명**: LED 철거 예정일
- **자동 계산**: 보통 행사 종료일 또는 다음날

### 5. LED 정보 필드 (1-5개소)

각 LED별로 다음 필드들이 반복됨:

#### LED{n} 크기 (rich_text)
- **형식**: "{가로}x{세로}"
- **단위**: mm
- **예시**: "6000x3000", "4000x2500"
- **검증**: 500mm 단위

#### LED{n} 무대 높이 (number)
- **단위**: mm
- **허용값**: 0 이상
- **설명**: 0 = 바닥 설치

#### LED{n} 오퍼레이터 필요 (checkbox)
- **설명**: 전문 운영 인력 필요 여부

#### LED{n} 오퍼레이터 일수 (number)
- **조건**: 오퍼레이터 필요 시에만 입력
- **단위**: 일

#### LED{n} 프롬프터 연결 (checkbox)
- **설명**: 발표자용 대본 표시 장치 연결

#### LED{n} 중계카메라 연결 (checkbox)
- **설명**: 실시간 영상 송출용 카메라 연결

#### LED{n} 모듈 수량 (number)
- **자동 계산**: (가로/500) × (세로/500)
- **설명**: LED 모듈 개수

### 6. 비용 필드

모든 비용은 원 단위, VAT 별도 (견적 금액만 VAT 포함)

#### 견적 금액 (number)
- **설명**: 최종 견적 총액 (VAT 포함)
- **계산**: (모든 비용 합계) × 1.1

#### 개별 비용 항목
- **LED 모듈 비용**: 모듈 개수 × 단가
- **지지구조물 비용**: 구조물 설치 비용
- **컨트롤러 및 스위치 비용**: 제어 장비
- **파워 비용**: 전원 장치
- **설치철거인력 비용**: 인건비
- **오퍼레이터 비용**: 운영 인력비
- **운반 비용**: 운송비
- **기간 할증 비용**: 렌탈 기간별 할증

### 7. 파일 필드

#### 견적서 (files)
- **설명**: 고객에게 제공하는 견적서
- **형식**: PDF 권장

#### 요청서 (files)  
- **설명**: 고객이 작성한 요청서
- **자동화**: 렌탈/멤버쉽에서 두 파일 모두 업로드 시 자동 승인

### 8. 기타 필드

#### 총 LED 모듈 수량 (number)
- **자동 계산**: 모든 LED 모듈 수량 합계

#### 문의요청 사항 (rich_text)
- **설명**: 고객의 추가 요청사항
- **기본값**: "없음"

## 자동화 규칙

### 상태 변경 트리거
1. **견적 요청 → 견적 검토**: 자동 (데이터 입력 완료 시)
2. **견적 검토 → 견적 승인**: 
   - 설치: 수동
   - 렌탈/멤버쉽: 파일 업로드 시 자동
3. **날짜 기반 자동 변경**: 스케줄러가 1시간마다 체크

### 필수 필드 검증
- 서비스 타입별로 다른 필수 필드 요구
- 누락된 필드는 자동화 실행 차단

### 담당자 자동 멘션
- 상태 변경 시 서비스별 담당자에게 자동 알림
- Notion 댓글로 멘션 및 상세 정보 제공